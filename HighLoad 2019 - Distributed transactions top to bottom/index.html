<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>MongoDB Distributed transactions from top to bottom | by Henrik Ingo @henrikingo</title>
    
    <meta name="description" content="MongoDB Distributed transactions from top to bottom" />
    <meta name="author" content="Henrik Ingo" />

    <link rel="stylesheet" href="impress.js/extras/highlight/styles/github.css">

    <link href="css/classic-slides.css" rel="stylesheet" />
    
</head>

<body class="impress-not-supported">
<!--
    This fallback message is only visible when there is `impress-not-supported` class on body.
-->
<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div id="impress" data-transition-duration="1000">
    <div class="step title" data-x="-1000" data-y="-1500" data-z="0">
        <h1>MongoDB <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distributed transactions<br>&nbsp;&nbsp;&nbsp;&nbsp; top to bottom</h1>
        <h2>Henrik Ingo (<a href="https://twitter.com/h_ingo">@h_ingo</a>)</h2>
        <h3>HighLoad++ 2019</h3>
    </div>

    <div class="step title tree-img skip" data-x="-3200" data-y="-1500" data-z="-5000" data-scale="7">
    
    </div>


    <div id="toc" class="step" data-x="1000" data-y="-1500" data-z="0">
        <h1>Table of Contents</h1>
        <ul>
            <li>Background &amp; History</li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>

    </div>

    <div id="history" class="step history" data-rel-x="2000">
        <h1>Circa 2007...</h1>
        <img src="images/DistractedBoyfriendMeme_bw.jpg" />
    </div>

    <div id="nosqlvenn" class="step skip" data-rel-x="-700" data-rel-y="900" data-rel-z="1000" data-scale="1">
        <img src="images/NoSQL-venn.png" align="right" height="2000"/>
    </div>

    <div id="keyvalue" class="step" data-rel-x="0" data-rel-y="50" data-rel-z="0" data-scale="0.9">
    </div>

    <div id="widecolumn" class="step" data-rel-x="-300" data-rel-y="350" data-rel-z="0" data-scale="0.9">
    </div>

    <div id="cassandra" class="step" data-rel-x="2000" data-rel-y="0" data-rel-z="0" data-scale="0.9"
         style="background-color: #bcd35f; border-radius: 10px;">
        <h1>Cassandra sidebar</h1>
        <ul>
            <li>Dynamo replication
            <ul>
                <li><a href="https://www.allthingsdistributed.com/files/amazon-dynamo-sosp2007.pdf">DeCandia et.al. 2007</a>, <a href="https://www.allthingsdistributed.com/2017/10/a-decade-of-dynamo.html">Vogels 2017</a></li>
                <li>Client reads &amp; writes multiple nodes</li>
                <li>Majority-style N+M consistency (See <a href="http://openlife.cc/blogs/2019/february/20-years-later-whats-left-cap-theorem">CAP theorem, 1999.</a>)</li>
                <li>Con's: read-amplification, repair-on-read</li>
            </ul></li>
            <li>Log Structured Merge tree (LSM)
            <ul>
                <li>Pinglei Guo: <a href="https://www.slideshare.net/ssuser7e134a/log-structured-merge-tree">presentation</a></li>
                <li>Mark Callaghan: <a href="http://smalldatum.blogspot.com/2018/10/describing-tiered-and-leveled-compaction.html">blog</a>, <a href="http://smalldatum.blogspot.com/2019/01/geek-code-for-lsm-trees.html">presentation</a></li>
            </ul></li>
            </li>
        </ul>
    </div>

    <div id="cassandra-back" class="step" data-rel-x="-2000" data-rel-y="0" data-rel-z="0" data-scale="1">
    </div>

    <div id="document" class="step" data-rel-x="-300" data-rel-y="200" data-rel-z="0" data-scale="1.6">
    </div>

    <div id="newsql" class="step" data-rel-x="700" data-rel-y="850" data-rel-z="0" data-scale="0.7">
    </div>

    <div id="chaplin" class="step" data-rel-x="2000" data-rel-y="500" data-rel-z="0" data-scale="1">
        <h1 style="text-align: left;">What about RDBMS?</h1>
        <img src="images/Chaplin-DistractedBoyfriend.jpg" style="position: relative; left: -100px;" />
        <div class="substep" style="text-align: left; position: absolute; top: 50px; right: 20px;">
            <ul>
            <li>Oracle RAC
                <ul><li>Not webscale</li></ul>
            </li>
            <li>MySQL
                <ul><li>Replication -&gt; Galera Cluster</li>
                    <li><strike>MySQL Fabric</strike></li>
                    <li>Vitesse?</li>
                </ul>
            </li>
            <li>PostgreSQL
                <ul><li>Logical Replication in 2017</li>
                    <li>Sharding: Citus</li>
                </ul>
            </li>
            </ul>
        </div>
    </div>


    <div id="why" class="step" data-x="-1000" data-y="800" data-z="0">
        <h1 style="font-size: 400%; font-family: 'Permanent Marker', cursive; position: relative; top: -100px;">WHY?</h1>
        <ul style="position: relative; left: 200px; top: -150px;">
            <li class="substep">MongoDB marketing: 80% - 90% of apps don't need transactions.</li>
            <li class="substep">Henrik: Well, maybe 50%...</li>
            <li class="substep"><a href="https://www.allthingsdistributed.com/2017/10/a-decade-of-dynamo.html">Werner Vogels on Amazon</a>: 
            <ul><li><q>About 70% of operations were of the key-value kind, where only a primary key was used and a single row would be returned. About 20% would ... still operate on only a single table.</q></li></ul>
            </li>
        </ul>
    </div>

    <div id="why2" class="step" data-rel-x="0" data-rel-y="850" data-rel-z="0">
        <h1 style="font-size: 400%; font-family: 'Permanent Marker', cursive;">WHY?</h1>
        <ul>
            <li class="substep">Many features only needed by 10%: sharding, join...</li>
            <li class="substep">Important to some well paying customers</li>
            <li class="substep">Classic example: Move 100â‚¬ from account A to B</li>
            <li class="substep">By-products: Snapshot Isolation, Causal Consistency, Secondary reads...</li>
        </ul>
    </div>

    <div id="roadmap" class="step" data-rel-x="0" data-rel-y="1500" data-rel-z="0">
        <img src="images/Path_to_Transactions.png" style="width: 100%;">
    </div>

    <div id="mvcc" class="step" data-x="-1000" data-y="4500" data-z="0">
        <h1>MVCC</h1>
    </div>

    <div id="next" class="step" data-rel-x="1000" data-rel-y="0" data-rel-z="0">
    </div>




    <div id="overview" class="step" data-x="3000" data-y="1500" data-scale="10" style="pointer-events: none;">
    </div>
</div>

<!--
    Add navigation-ui controls: back, forward and a select list.
    Add a progress indicator bar (current step / all steps)
    Add the help popup plugin
-->
<div id="impress-toolbar"></div>

<div id="impress-help"></div>

<!-- Extra modules
     Load highlight.js, mermaid.js, markdown.js and MathJax.js from extras.
     If you're curious about details, these are initialized in src/plugins/extras/extras.js -->
<script type="text/javascript" src="impress.js/extras/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="impress.js/extras/markdown/markdown.js"></script>
<!--
    To make all described above really work, you need to include impress.js in the page.
    You also need to call a `impress().init()` function to initialize impress.js presentation.
    And you should do it in the end of your document. 
-->
<script type="text/javascript" src="impress.js/js/impress.js"></script>
<script>impress().init();</script>

</body>
</html>
